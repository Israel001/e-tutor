loggedIn&&(window.location="/index.html"),window.location.href.includes("token")||(window.location="/index.html");const pwdToken=window.location.href.split("?")[1].split("=")[1];pwdToken.length<32&&(window.location="/index.html");const forms=document.getElementsByClassName("needs-validation"),setErrorMessage=e=>{document.querySelector("#loader").remove(),document.querySelector("#change-pwd-btn-area").insertAdjacentHTML("afterbegin",'<button type="submit" class="btn btn-primary" style="border-color: #f7941d ; background-color: #00b3a1" id="change-pwd-btn">\n            Submit\n          </button>'),document.querySelector(".col-md-8").insertAdjacentHTML("afterbegin",`<div class="alert alert-danger">\n            <a href="javascript:void(0);" class="close" data-dismiss="alert" aria-label="close">&times;</a>\n            <strong>Error:</strong> ${e}\n          </div>`)};Array.prototype.filter.call(forms,e=>{e.addEventListener("submit",async t=>{if(t.preventDefault(),t.stopPropagation(),e.checkValidity()){document.querySelector("#change-pwd-btn").remove(),document.querySelector("#change-pwd-btn-area").insertAdjacentHTML("afterbegin",'<div class="col-lg-4 col-md-4 col-sm-6 col-xs-12" id="loader">\n              <div class="loader"></div>\n            </div>');let e=document.querySelector("#password").value;if(e!==document.querySelector("#confirm-password").value)setErrorMessage("Passwords do not match");else try{const t=await fetch(`${baseURL}/new_password/${pwdToken}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})}),o=await t.json();201!==t.status?setErrorMessage(o.message):(document.querySelector("#password").value="",document.querySelector("#confirm-password").value="",document.querySelector("#loader").remove(),document.querySelector("#change-pwd-btn-area").insertAdjacentHTML("afterbegin",'<button type="submit" class="btn btn-primary" style="border-color: #f7941d ; background-color: #00b3a1" id="change-pwd-btn">\n                      Submit\n                    </button>'),document.querySelector(".col-md-8").insertAdjacentHTML("afterbegin",'<div class="alert alert-success">\n                <a href="javascript:void(0);" class="close" data-dismiss="alert" aria-label="close">&times;</a>\n                <strong>Success:</strong> Your password has been changed successfully. \n                You can now <a href="/login.html">login</a> using your new password\n            </div>'))}catch(e){setErrorMessage("Something went wrong")}}else e.classList.add("was-validated")})});