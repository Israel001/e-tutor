loggedIn&&(window.location="/index.html");const forms=document.getElementsByClassName("needs-validation"),setErrorMessage=e=>{document.querySelector("#login-btn").setAttribute("disabled","false"),document.querySelector(".col-md-8").insertAdjacentHTML("afterbegin",`<div class="alert alert-danger">\n        <a href="javascript:void(0);" class="close" data-dismiss="alert" aria-label="close">&times;</a>\n        <strong>Error:</strong> ${e}\n    </div>`)};Array.prototype.filter.call(forms,e=>{e.addEventListener("submit",async t=>{if(t.preventDefault(),t.stopPropagation(),e.checkValidity()){document.querySelector("#login-btn").setAttribute("disabled","true");let e=document.querySelector("#email_address").value,t=document.querySelector("#password").value;try{const a=await fetch(`${baseURL}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),o=await a.json();if(200!==a.status)setErrorMessage(o.message);else{document.getElementById("auth-btn").attributes.href="javascript:void(0)",document.getElementById("auth-btn").innerText="Log Out",localStorage.setItem("loggedIn","true"),localStorage.setItem("token",o.data.token),localStorage.setItem("userId",o.data.userId);const e=36e5,t=new Date((new Date).getTime()+e);localStorage.setItem("expiryDate",t.toISOString()),autoLogout(e),window.location="/index.html"}}catch(e){setErrorMessage("Something went wrong")}document.querySelector("#login-btn").setAttribute("disabled","false")}else e.classList.add("was-validated")})});